<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body {font-family:'Helvetica Neue', Arial, sans-serif; color:#333; font-size:13px; line-height:17px;}
      body .name,body .note {white-space:pre-wrap;}
      body ul {list-style:disc; margin:0; padding:0;}
      body li {margin:4px 0 4px 20px; padding:0;}
      body>.name {font-size:16px; line-height:21px;}
      body>.note {font-size:13px; line-height:17px;}
      body>ul {margin-top:15px;}
      body .name.done {text-decoration:line-through; color:#999;}
      body .note {font-size:12px; color:#666;}
    </style>
  </head>
  <body>
    <span class="name">Python和大数据</span><ul><li><span class="name"><b>使用Jupyter Notebook</b></span><ul><li><span class="name">启动命令: jupyter notebook</span></li><li><span class="name">启动一个本地的notebook服务器, 基于浏览器的IDE环境,  可以交互式的写代码, 调试. 特有优势是能把代码/数据/图表保存在同一个文件中, 方便展示/教学/分享等场景.</span></li><li><span class="name">import matplotlib.pyplot as plt</span></li><li><span class="name">%matplotlib inline    # import之后加入这行, 用于通知notebook将matplot图表直接显示在浏览器中.</span></li></ul></li><li><span class="name">Numpy</span><ul><li><span class="name">安装: pip3 install numpy</span></li><li><span class="name">import numpy as np</span></li><li><span class="name">读取csv文件</span><ul><li><span class="name">data = np.genfromtxt("d:\\data.csv", delimiter=";", dtype=str)</span></li><li><span class="name">csv文件的格式是: 一行一个数据, 各字段用";"分割. </span></li></ul></li><li><span class="name"><b>创建矩阵</b></span><ul><li><span class="name">创建矩阵: <b>vector </b>= np.<b>array</b>([[1, 2, 3], [4, 5, 6], [7, 8, 9]])  </span></li><li><span class="name">array() 必须是矩阵, 即每行每列数的个数都一致, 不一致会怎么样? </span><ul><li><span class="name">每行数转化为 list, 然后组成1维向量.</span></li><li><span class="name">vector1 = np.array([[1, 2, 3], [4, 5], [6]])</span></li><li><span class="name">print(vector1)</span></li><li><span class="name">=&gt; [list[1, 2, 3], list[4, 5], list[6]]</span></li></ul></li><li><span class="name">array 中的元素要保证类型一致, 如果不一致会自动向下强转. 比如: 整数强转为小数, 数字强转为字符串.</span></li><li><span class="name">创建全零的矩阵</span><ul><li><span class="name">np.<b>zeros</b>((2, 3), dtype=np.int32)  ==&gt; [[0, 0, 0], [0, 0, 0]]</span></li></ul></li><li><span class="name">创建全一的矩阵</span><ul><li><span class="name">np.<b>ones</b>((2, 3), dtype=np.int32)   ==&gt; [[1, 1, 1], [1, 1, 1]]</span></li></ul></li><li><span class="name"><b>创建等差向量 --用途很广</b></span><ul><li><span class="name">np.<b>arange</b>(5)  ==&gt; array[0, 1, 2, 3, 4]</span></li></ul></li><li><span class="name">创建正态分布随机数矩阵</span><ul><li><span class="name">有两种方式: </span></li><li><span class="name">np.random.<b>randn</b>(m,n)  ==&gt; m, n为维度</span></li><li><span class="name">np.random.<b>rand</b>(m,n)  ==&gt; 和上面的区别是这个产生的随机数在 [0, 1) 区间内.</span></li></ul></li><li><span class="name"><b>更改矩阵的形状 --用途很广</b></span><ul><li><span class="name">np.arange(9).<b>reshape</b>(3, 3)  ==&gt; [[0, 1, 2], [3, 4, 5], [6, 7, 8]]</span></li><li><span class="name">np.arange(8).<b>reshape</b>(2, 2, 2)  ==&gt; [[[0, 1], [2, 3]], [[4, 5], [6, 7]]]</span></li></ul></li></ul></li><li><span class="name"><b>获取矩阵的属性</b></span><ul><li><span class="name">返回矩阵行列数: vector.<b>shape  </b>==&gt; (3, 3)</span></li><li><span class="name">返回矩阵的维度: vector.<b>ndim </b>==&gt; 2</span></li><li><span class="name">返回矩阵中元素的个数: vector.<b>size  </b>==&gt; 9</span></li><li><span class="name">返回某行某列的元素个数: vector[1,].<b>size </b>==&gt; 3</span></li><li><span class="name">返回元素数据类型: vector.<b>dtype  </b>==&gt; dtype('int32')</span></li><li><span class="name">元素类型强转</span><ul><li><span class="name">vector = vector.<b>astype</b>(np.<b>str</b>)   # 强转为字符串</span></li><li><span class="name">print(vector)   ==&gt; [['1' '2' '3']['4' '5' '6']['7' '8' '9']]</span></li></ul></li></ul></li><li><span class="name">矩阵赋值</span><ul><li><span class="name">a=np.arrange(15)</span></li><li><span class="name">赋值1: b=a   # a,b 指向同一个数组, 改变一个, 另外一个也随之改变. </span></li><li><span class="name">赋值2: b=a.view()  # a,b 指向同一个数组, 改变一个, 另外一个也随之改变.  但是属性和ID不一样.</span><ul><li><span class="name">print(b is a)  =&gt; False</span></li><li><span class="name">print(id(a) == id(b))  =&gt; False</span></li></ul></li><li><span class="name">赋值3: b=a.copy()  # a, b值一样, 但是指向两个数组, 一个改变另外一个不随之改变.</span></li></ul></li><li><span class="name">矩阵复制</span><ul><li><span class="name">b=np.tile(a, (2, 2))   # 相当于b=a*2</span></li></ul></li><li><span class="name"><b>对矩阵进行切片</b>  (注意:从0开始计数)</span><ul><li><span class="name">取单个元素: print(vector[1, 1]  ==&gt; 5</span></li><li><span class="name">取整列: print(vector[: , 1])  ==&gt; [2, 5, 8]</span></li><li><span class="name">取整行: print(vector[1, :])  ==&gt; [4, 5, 6]</span></li><li><span class="name">范围取值: print(vector[1, 1:2])  ==&gt;[5, 6]    # 表示第二2行, 2-3列.</span></li></ul></li><li><span class="name">逐个元素判值</span><ul><li><span class="name">不太好理解, 直接看例子.</span></li><li><span class="name">vector2 = np.array([1, 2, 3, 4])</span></li><li><span class="name">print(vector2 == 2)</span></li><li><span class="name">=&gt; [False, True, False, False]   # 即将矩阵中的每个值都和2比较, 其结果也组成一个同结构的矩阵.</span></li></ul></li><li><span class="name">通过判值和条件生成新矩阵</span><ul><li><span class="name"><b>check1 </b>= (vector % 2 ==0)     # 定义checker, 取所有偶数</span></li><li><span class="name">print(vector[check1])  =&gt; [2, 4, 6, 8]   # 注意, 矩阵变向量.</span></li><li><span class="name"><b>check2 </b>= (vector[: , 2] % 2 == 1)    # 条件是只要每行的第三个数为奇数, 则取整行.</span></li><li><span class="name">print(vector[check2])  ==&gt; [[1, 2, 3], [7, 8, 9]]</span></li><li><span class="name"><b>check3 </b>= ((vector &gt; 4) &amp; (vector &lt; 9))</span></li><li><span class="name">print(vector[check3])  ==&gt; [5, 6, 7, 8]</span></li><li><span class="name"><b>定义checker, 要注意括号要加足.</b></span></li></ul></li><li><span class="name">取最大值/最小值/求和等</span><ul><li><span class="name">print(vector.min())  ==&gt; 1</span></li><li><span class="name">print(vector.max())  ==&gt; 9</span></li><li><span class="name">print(vector[: , 2].max())  ==&gt;9   # 第三列最大值</span></li><li><span class="name">print(vector.sum())   ==&gt; 45</span></li><li><span class="name">print(vector.sum(axis=1))  ==&gt;[6, 15, 24]  # 逐行求和. 相应的, axis = 0 表示逐列求和.</span></li></ul></li><li><span class="name">等差数列</span><ul><li><span class="name">a=np.arrange(0, 15, 3)  # 从0到15(不含15), 公差为3的等差数列, 即[0, 3, 6, 9, 12]</span></li></ul></li><li><span class="name">随机数数列</span><ul><li><span class="name">a=np.random.random((3, 4))   # 3*4的随机性矩阵, 元素值域是-1到1.</span></li></ul></li><li><span class="name">大致平均的随机数数列</span><ul><li><span class="name">np.linspace(2, 5, 30)   # 2和5之间生成大致平均的30个值. 非等差数列.</span></li></ul></li><li><span class="name">矩阵的五则运算(加减乘除, 取余)</span><ul><li><span class="name">长度不同的矩阵不能做运算.</span></li><li><span class="name">a=np.array([1, 2, 4, 5])</span></li><li><span class="name">b=np.array(2, 10 ,2)  =&gt; [2, 4, 6, 8]</span></li><li><span class="name">则: a+b =&gt; [3, 6, 10, 13]</span></li><li><span class="name">a-b =&gt;[-1, -2, -2, -3]</span></li><li><span class="name">其它如此类推.</span></li></ul></li><li><span class="name">矩阵乘法(点积)</span><ul><li><span class="name">两个矩阵必须行数=列数, 列数=行数才可以相乘.</span></li><li><span class="name">a=np.arrange(15).reshape(3, 5)</span></li><li><span class="name">b=np.arrange(15).reshape(5, 3)</span></li><li><span class="name">a.dot(b)   # 矩阵乘法</span></li></ul></li><li><span class="name">矩阵的e乘方, 开方, 取整, 还原</span><ul><li><span class="name">np.exp(a)  # 矩阵每个元素e乘方</span></li><li><span class="name">np.sqrt(a)  # 每个元素开方</span></li><li><span class="name">np.floor(np.sqrt(a))  # 先开方再取整</span></li><li><span class="name">a.revel()  # 将矩阵降位维为向量</span></li></ul></li><li><span class="name">矩阵拼接</span><ul><li><span class="name">np.vstack(a, b)   # 纵向拼接</span></li><li><span class="name">np.hstack(a, b)  # 横向拼接</span></li></ul></li><li><span class="name">矩阵切分</span><ul><li><span class="name">np.vsplit(a, 2)   # 纵向平均切分</span></li><li><span class="name">np.hsplit(a, 3)   # 横向切分</span></li></ul></li><li><span class="name">定向切分</span><ul><li><span class="name">np.vsplit(a, (1,2))  # 在 (1, 2) 元素后面分别切分</span></li><li><span class="name">np.rsplint(a, (1,))   # 仅在第1行后面切分</span></li></ul></li><li><span class="name">取极值的坐标</span><ul><li><span class="name">a.argmax(axis=0.1)     # 列最大值</span></li><li><span class="name">a.argmin(axis=1)   # 行最小值</span></li></ul></li><li><span class="name">排序和排序索引</span><ul><li><span class="name">b=np.sort(a, axis=0)   # 纵向排序. axis=1, 横向排序</span></li><li><span class="name">b=np.argsort(a, axis=0)  # 纵向排序<b>索引</b>, 即由0开始的index组成的矩阵.</span></li></ul></li></ul></li><li><span class="name">Pandas: 数据分析处理库</span><ul><li><span class="name">import pandas as pd</span></li><li><span class="name">pd 的主要特点是可以定义标题行, 允许通过字符串来引用行, 类, 和元素.</span></li><li><span class="name">读取csv文件</span><ul><li><span class="name">a=pandas.read_csc("d:\\data.csv"</span></li><li><span class="name">print(a)</span></li><li><span class="name">第一行会被默认为标题. 标题总是字符串. </span></li><li><span class="name">会自动加一列为行标识符, 从0开始, 从第二行开始计算. </span></li></ul></li><li><span class="name">获取数据类型</span><ul><li><span class="name">a.dtypes  # 会逐行显示数据类型, 第一行不参与.</span></li></ul></li><li><span class="name">指定元素</span><ul><li><span class="name">方式很多:</span></li><li><span class="name">a["1"]   # 获取标题为"1"的列</span></li><li><span class="name">a["1", "2", "3"]   # 获取标题分别为 1, 2, 3的列.</span></li><li><span class="name">a.loc[2, "1"]   # 第3行, 标题为"1"的列的值.</span></li></ul></li><li><span class="name">去掉缺失值</span><ul><li><span class="name">dropna(axis=1)   # 去掉有缺失值的列.</span></li><li><span class="name">dropna(axis=0, subject=["1", 2]   # 去掉第"1"列中缺失值的行.</span></li></ul></li><li><span class="name">计算平均值 (有缺失值的情况下)</span><ul><li><span class="name">a["1"].mean()    # 第"1"列的平均值</span></li></ul></li><li><span class="name">统计平均值 (以某列为基准, 统计另一个指标的平均值), 即透视表.</span><ul><li><span class="name">a.pivot_table(index="1", values="2", aggfunc=np.mean)  # 求平均值</span></li><li><span class="name">aggfunc 还有: </span><ul><li><span class="name">np.sum  求和</span></li><li><span class="name">np.max  求最大值</span></li><li><span class="name">np.min   求最小值</span></li></ul></li></ul></li><li><span class="name">加减乘除, 乘方</span><ul><li><span class="name">a["1"] + 1   # 第"1"列全部+1. 其它运算以此类推.</span></li><li><span class="name">a["2"] **2   # 第"2"列全部2次方.</span></li></ul></li><li><span class="name">列排序</span><ul><li><span class="name">a.sort_values("1", inplace=True)   # 按第"1"列正向排序 </span></li><li><span class="name">a.sort_values("2", inplace=True, ascending=False)  # 按第"2"列逆向排序</span></li></ul></li><li><span class="name">缺失值</span><ul><li><span class="name">pandas.isnull(a)  # 返回一个与a同维的矩阵, 只有 False/True 两个值, True表示该值为空.</span></li></ul></li><li><span class="name">获取前若干行</span><ul><li><span class="name">a.head(3)    # 获取前3行</span></li><li><span class="name">a.head()   # 默认获取前5行</span></li></ul></li><li><span class="name">获取后若干行</span><ul><li><span class="name">a.tail(3)   # 获取后3行. 默认是5行.</span></li></ul></li><li><span class="name">获取标题行</span><ul><li><span class="name">a.columns  # 返回 Index(["1", "2", "3", "4"], dtype="object")</span></li></ul></li><li><span class="name">获取行列数</span><ul><li><span class="name">a.shape  # 不包括标题行</span></li></ul></li><li><span class="name">获取指定行</span><ul><li><span class="name">a.loc[3]   # 第3行</span></li><li><span class="name">a.loc[2:4]   # 获取2-4行</span></li><li><span class="name">a.loc[1, 3, 5]   # 获取1, 3, 5 行</span></li></ul></li><li><span class="name"></span></li></ul></li></ul>
  </body>
</html>