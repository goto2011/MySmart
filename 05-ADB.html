<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body {font-family:'Helvetica Neue', Arial, sans-serif; color:#333; font-size:13px; line-height:17px;}
      body .name,body .note {white-space:pre-wrap;}
      body ul {list-style:disc; margin:0; padding:0;}
      body li {margin:4px 0 4px 20px; padding:0;}
      body>.name {font-size:16px; line-height:21px;}
      body>.note {font-size:13px; line-height:17px;}
      body>ul {margin-top:15px;}
      body .name.done {text-decoration:line-through; color:#999;}
      body .note {font-size:12px; color:#666;}
    </style>
  </head>
  <body>
    <span class="name"><span class="innerContentContainer"><b>05-ADB</b></span></span><ul><li><span class="name"><span class="innerContentContainer">刷机: fastboot</span></span><ul><li><span class="name"><span class="innerContentContainer">重启到bootloader，即刷机模式：adb reboot bootloader</span></span></li><li><span class="name"><span class="innerContentContainer">重启到EDL模式(快速刷机): adb reboot edl</span></span></li><li><span class="name"><span class="innerContentContainer">在fastboot 中也可以进 EDL: fastboot oem edl</span></span></li><li><span class="name"><span class="innerContentContainer">下载一个分区： fastboot flash boot boot.img</span></span></li><li><span class="name"><span class="innerContentContainer">重启到recovery，即恢复模式：adb reboot recovery</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">导出已安装应用的apk文件</span></span><ul><li><span class="name"><span class="innerContentContainer">找包名： adb shell pm list package</span></span></li><li><span class="name"><span class="innerContentContainer">找apk安装路径： adb shell pm path + 包名</span></span></li><li><span class="name"><span class="innerContentContainer">adb pull 即可。</span></span></li><li><span class="name"><span class="innerContentContainer">Google play商店的包名是： com.android.vending </span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">ADB连接管理</span></span><ul><li><span class="name"><span class="innerContentContainer">等待设备连接上: adb wait-for-device  --用于脚本，***</span></span></li><li><span class="name"><span class="innerContentContainer">查看连接中的设备：adb devices.  返回设备ID可用于其它命令.</span></span></li><li><span class="name"><span class="innerContentContainer">指定设备安装: adb  -s [设备ID] install ...</span></span></li><li><span class="name"><span class="innerContentContainer">获取设备序列号：adb get-serialno</span></span></li><li><span class="name"><span class="innerContentContainer">获取设备状态: adb get-state </span></span><ul><li><span class="name"><span class="innerContentContainer">设备的状态有 3 钟，device&nbsp;,&nbsp;offline&nbsp;,&nbsp;unknown</span></span></li><li><span class="name"><span class="innerContentContainer">device：设备正常连接</span></span></li><li><span class="name"><span class="innerContentContainer">offline：连接出现异常，设备无响应</span></span></li><li><span class="name"><span class="innerContentContainer">unknown：没有连接设备</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">终止adb服务进程：adb kill-server</span></span></li><li><span class="name"><span class="innerContentContainer">重启adb服务进程：adb start-server</span></span></li><li><span class="name"><span class="innerContentContainer">查看ADB帮助：adb help</span></span></li><li><span class="name"><span class="innerContentContainer">重启机器：adb reboot</span></span></li><li><span class="name"><span class="innerContentContainer">将宿主机上的某个端口重定向到设备的某个端口:  db forward tcp:1314 tcp:8888</span></span></li><li><span class="name"><span class="innerContentContainer">WiFi连接 ADB(方法1)</span></span><ul><li><span class="name"><span class="innerContentContainer">手机、PC处于相同的网络下，手机 root ，安装应用 adbWireless ，启动应用后点击界面中间的按钮</span></span></li><li><span class="name"><span class="innerContentContainer">运行 adb connect 192.168.1.102&nbsp;, 即可通过无线的方式连接手机，缺点是速度比较慢</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">WiFi链接 ADB(方法2)</span></span><ul><li><span class="name"><span class="innerContentContainer">usb连接接手机, 输入命令: adb tcpip 5555</span></span><ul><li><span class="name"><span class="innerContentContainer">restarting in TCP mode port: 5555</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">拔掉手机, 输入命令: adb connect 192.168.0.44:5555  (手机IP地址)</span></span><ul><li><span class="name"><span class="innerContentContainer">connected to 192.168.11.117:5555</span></span></li></ul></li></ul></li></ul></li><li><span class="name"><span class="innerContentContainer"><b>抓Log</b></span></span><ul><li><span class="name"><span class="innerContentContainer">抓app+fwk log: adb logcat *** .  参数如下:</span></span><ul><li><span class="name"><span class="innerContentContainer"><b>-b main</b></span></span><ul><li><span class="name"><span class="innerContentContainer">默认, 主程序log. </span></span></li><li><span class="name"><span class="innerContentContainer">一般用户空间log将写入设备节点 /dev/log/main，包括 System.out.print 及 System.erro.print 等.</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">-b system</span></span><ul><li><span class="name"><span class="innerContentContainer">fwk层log信息和debugging.</span></span></li><li><span class="name"><span class="innerContentContainer">为了防止mian缓存区溢出, 而从其中分离出来.</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">-b radio</span></span><ul><li><span class="name"><span class="innerContentContainer">射频通话相关信息.</span></span></li><li><span class="name"><span class="innerContentContainer">tag 为"HTC_RIL" "RILJ" "RILC" "RILD" "RIL" "AT" "GSM" "STK"的log信息将写入此节点.</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer"><b>-c: 清除log缓存</b></span></span></li><li><span class="name"><span class="innerContentContainer">-v: 指定Log前缀格式, 包括:</span></span><ul><li><span class="name"><span class="innerContentContainer">brief: 默认</span></span></li><li><span class="name"><span class="innerContentContainer">process: 只有PID.</span></span></li><li><span class="name"><span class="innerContentContainer">tag: 只有优先级和PID</span></span></li><li><span class="name"><span class="innerContentContainer">time: 有日期时间, 优先级, 标签和PID</span></span></li><li><span class="name"><span class="innerContentContainer">threadtime: 仅time + thread id</span></span></li><li><span class="name"><span class="innerContentContainer">raw: 不显示前缀</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">-d: 打印当前log后退出.</span></span></li><li><span class="name"><span class="innerContentContainer">-g: 打印缓冲区大小</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">抓kernel log: </span></span><ul><li><span class="name"><span class="innerContentContainer">adb shell cat /proc/kmsg；kernel日志,每cat一次会清零</span></span></li><li><span class="name"><span class="innerContentContainer">adb dmesg -n 8，配置打印级别, 8是所有都打。</span></span></li><li><span class="name"><span class="innerContentContainer">adb shell dmesg: ernel日志,开机信息.(通过var/log/demsg)</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">抓取 bugreport: adb bugreport &gt; bugreport.log</span></span><ul><li><span class="name"><span class="innerContentContainer">log中包含有dmesg，dumpstate和dumpsys: </span></span><ul><li><span class="name"><span class="innerContentContainer">dmesg: kernel log</span></span></li><li><span class="name"><span class="innerContentContainer">dumpstate: 系统状态信息，里面比较全</span></span></li><li><span class="name"><span class="innerContentContainer">dumpsys: 系统所有进程Process的基本属性.</span></span></li></ul></li></ul></li><li><span class="name"><span class="innerContentContainer">过滤Log关键字: adb logcat | find "***"</span></span><ul><li><span class="name"><span class="innerContentContainer">过滤多个关键字: findstr 后用空格分开.</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">logcat 遇到 read: unexpected EOF!. 解决办法是:</span></span><ul><li><span class="name"><span class="innerContentContainer">adb logcat -G 2m</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">清空logcat buffer： adb logcat -c</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">常见ADB命令</span></span><ul><li><span class="name"><span class="innerContentContainer">加view边框： adb shell setprop debug.layout true    ****</span></span></li><li><span class="name"><span class="innerContentContainer">Monkey：adb shell monkey -v -p &lt;apk&gt; 50000   ***</span></span></li><li><span class="name"><span class="innerContentContainer">截图：  adb shell screencap -p /sdcard/DCIM/1.JPG     ***</span></span></li><li><span class="name"><span class="innerContentContainer">屏幕录制:  adb shell screenrecord sdcard/record.mp4</span></span></li><li><span class="name"><span class="innerContentContainer">发送文本内容(不能发中文):  adb shell input text test123456</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer"><b>dumpsys</b></span></span><ul><li><span class="name"><span class="innerContentContainer">窗口列表: adb shell dumpsys&nbsp;window</span></span></li><li><span class="name"><span class="innerContentContainer">进程列表: adb shell dumpsys activity processes</span></span></li><li><span class="name"><span class="innerContentContainer">获取Activity信息: adb shell dumpsys activity activities</span></span><ul><li><span class="name"><span class="innerContentContainer">获取当前界面的Activity信息：adb shell dumpsys activity top</span></span></li><li><span class="name"><span class="innerContentContainer">要获取当前界面的Activity：adb shell dumpsys activity top | findstr ACTIVITY</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">打印当前系统所有service信息: adb shell dumpsys activity services</span></span><ul><li><span class="name"><span class="innerContentContainer">打印指定服务的信息: adb shell dumpsys service ***(指定服务名)</span></span></li><li><span class="name"><span class="innerContentContainer">列出当前运行的服务： adb shell dumpsys | findstr DUMP</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">Provider列表: adb shell dumpsys activity providers</span></span></li><li><span class="name"><span class="innerContentContainer">获取package状态: adb shell dumpsys package, 可指定包名</span></span></li><li><span class="name"><span class="innerContentContainer">获取通知列表: adb shell dumpsys notification. 返回值是:</span></span><ul><li><span class="name"><span class="innerContentContainer">NotificationRecord(0x44217920: pkg=com.sohu.newsclient useron=0x7f0201b5 / com.tencent.news:drawable/icon</span></span></li><li><span class="name"><span class="innerContentContainer">pri=0 score=0</span></span></li><li><span class="name"><span class="innerContentContainer">contentIntent=PendingIntent{4294d748: PendingIntentRecord{44088e90 com.tencent.news startActivity}}</span></span></li><li><span class="name"><span class="innerContentContainer">deleteIntent=null</span></span></li><li><span class="name"><span class="innerContentContainer">tickerText=null</span></span></li><li><span class="name"><span class="innerContentContainer">contentView=android.widget.RemoteViews@441fc810</span></span></li><li><span class="name"><span class="innerContentContainer">defaults=0x00000001 flags=0x00000010</span></span></li><li><span class="name"><span class="innerContentContainer">sound=null</span></span></li><li><span class="name"><span class="innerContentContainer">vibrate=null</span></span></li><li><span class="name"><span class="innerContentContainer">led=0x00000000 onMs=0 offMs=0</span></span></li><li><span class="name"><span class="innerContentContainer">extras={</span></span><ul><li><span class="name"><span class="innerContentContainer">android.title=农业部:中国超级稻亩产超1吨</span></span></li><li><span class="name"><span class="innerContentContainer">android.subText=null</span></span></li><li><span class="name"><span class="innerContentContainer">android.showChronometer=false</span></span></li><li><span class="name"><span class="innerContentContainer">android.icon=2130837941</span></span></li><li><span class="name"><span class="innerContentContainer">android.text=农业部今日通报称,经专家测产,袁隆平领衔培育的中国“超级稻”亩产过千公斤,创造1026.7公斤新纪录。详情&gt;&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">android.progress=0</span></span></li><li><span class="name"><span class="innerContentContainer">android.progressMax=0</span></span></li><li><span class="name"><span class="innerContentContainer">android.showWhen=true</span></span></li><li><span class="name"><span class="innerContentContainer">android.infoText=null</span></span></li><li><span class="name"><span class="innerContentContainer">android.progressIndeterminate=false</span></span></li><li><span class="name"><span class="innerContentContainer">android.scoreModified=false</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">}</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取广播: adb shell dumpsys activity broadcasts</span></span></li><li><span class="name"><span class="innerContentContainer">获取intents消息: adb shell dumpsys activity intents</span></span></li><li><span class="name"><span class="innerContentContainer">提醒列表: adb shell dumpsys alarm</span></span></li><li><span class="name"><span class="innerContentContainer">获取内存状态:  adb shell dumpsys meminfo</span></span><ul><li><span class="name"><span class="innerContentContainer">要获取具体应用的内存信息，可加上包名:  adb shell dumpsys meminfo PACKAGE_NAME</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">查看camera属性和状态: adb shell dumpsys media.camera</span></span><ul><li><span class="name"><span class="innerContentContainer">注意 stream[0], [1]</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取位置状态: adb shell dumpsys location</span></span></li><li><span class="name"><span class="innerContentContainer">获取电话状态: adb shell dumpsys telephony.registry. 返回:</span></span><ul><li><span class="name"><span class="innerContentContainer">mCallState值为0，表示待机状态、1表示来电未接听状态、2表示电话占线状态</span></span></li><li><span class="name"><span class="innerContentContainer">mCallForwarding=false   # 是否启用呼叫转移</span></span></li><li><span class="name"><span class="innerContentContainer">mDataConnectionState=2 #0：无数据连接 1：正在创建数据连接 2：已连接</span></span></li><li><span class="name"><span class="innerContentContainer">mDataConnectionPossible=true   # 是否有数据连接</span></span></li><li><span class="name"><span class="innerContentContainer">mDataConnectionApn=   # APN名称</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取CPU信息:  adb shell dumpsys cpuinfo</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer"><b>模拟按键</b></span></span><ul><li><span class="name"><span class="innerContentContainer"><b>模拟按键事件</b>:  adb shell input keyevent KEYCODE_HOME</span></span><ul><li><span class="name"><span class="innerContentContainer">事件在 KeyEvent.java 中定义.</span></span></li><li><span class="name"><span class="innerContentContainer">比如： public static final int KEYCODE_HOME = 3;</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">模拟触摸事件:  adb shell input tap 500 500</span></span></li><li><span class="name"><span class="innerContentContainer">模拟滑动事件:  adb shell input swipe 900 500 100 500</span></span></li><li><span class="name"><span class="innerContentContainer">模拟长按事件: adb shell input swipe 500 500 501 501 2000</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">prop项</span></span><ul><li><span class="name"><span class="innerContentContainer">修改prop项（重启不失效）： pull 到本地，用写字板修改，然后再push回去，改权限644，最后重启。</span></span></li><li><span class="name"><span class="innerContentContainer">获取prop值:  adb shell getprop ro.build.version.sdk</span></span></li><li><span class="name"><span class="innerContentContainer">设置prop项： adb shell setprop ***=0/1/true/false</span></span><ul><li><span class="name"><span class="innerContentContainer">重启后失效</span></span></li></ul></li></ul></li><li><span class="name"><span class="innerContentContainer">屏幕管理</span></span><ul><li><span class="name"><span class="innerContentContainer">关闭屏幕（模拟power）： adb shell input keyevent 26</span></span></li><li><span class="name"><span class="innerContentContainer">获取屏幕状态:  adb shell dumpsys display | findstr DisplayDeviceInfo.  返回:</span></span><ul><li><span class="name"><span class="innerContentContainer">DisplayDeviceInfo{"内置屏幕": 1080 x 1920, 55.0 fps, density 480, 464.949 x 468.923 dpi...</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取屏幕分辨率:  adb shell wm size</span></span><ul><li><span class="name"><span class="innerContentContainer">Physical size: 1080x1920</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取亮度是否为自动获取: adb shell settings get system screen_brightness_mode</span></span></li><li><span class="name"><span class="innerContentContainer">获取当前亮度值: adb shell settings get system screen_brightness</span></span></li><li><span class="name"><span class="innerContentContainer">更改亮度值（亮度值在0—255之间）: adb shell settings put system screen_brightness 150</span></span></li><li><span class="name"><span class="innerContentContainer">获取屏幕休眠时间: adb shell settings get system screen_off_timeout</span></span></li><li><span class="name"><span class="innerContentContainer">更改休眠时间，10分钟: adb shell settings put system screen_off_timeout 600000</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">网络管理</span></span><ul><li><span class="name"><span class="innerContentContainer">获取wifi状态: adb shell dumpsys wifi. 可以获取到当前连接的wifi名、搜索到的wifi列表、wifi强度等</span></span></li><li><span class="name"><span class="innerContentContainer">获取MAC地址：adb shell cat /sys/class/net/wlan0/address</span></span></li><li><span class="name"><span class="innerContentContainer">查看wifi密码：adb shell cat /data/misc/wifi/*.conf</span></span></li><li><span class="name"><span class="innerContentContainer">获取设备名称：adb shell cat /system/build.prop</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">充电管理</span></span><ul><li><span class="name"><span class="innerContentContainer">获取设备电池状态: adb shell dumpsys battery / batterystats. 返回:</span></span><ul><li><span class="name"><span class="innerContentContainer">Current Battery Service state:</span></span></li><li><span class="name"><span class="innerContentContainer">AC powered: false</span></span></li><li><span class="name"><span class="innerContentContainer">USB powered: true</span></span></li><li><span class="name"><span class="innerContentContainer">Wireless powered: false</span></span></li><li><span class="name"><span class="innerContentContainer">status: 2   # 电池状态</span></span></li><li><span class="name"><span class="innerContentContainer">health: 2</span></span></li><li><span class="name"><span class="innerContentContainer">present: true</span></span></li><li><span class="name"><span class="innerContentContainer">level: 34  # 电量</span></span></li><li><span class="name"><span class="innerContentContainer">scale: 100</span></span></li><li><span class="name"><span class="innerContentContainer">voltage: 3848</span></span></li><li><span class="name"><span class="innerContentContainer">current now: -427943</span></span></li><li><span class="name"><span class="innerContentContainer">temperature: 280   # 电池温度</span></span></li><li><span class="name"><span class="innerContentContainer">technology: Li-ion</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取电源管理状态: adb shell dumpsys power. 返回:</span></span><ul><li><span class="name"><span class="innerContentContainer">可以获取到是否处于锁屏状态：mWakefulness=Asleep或者mScreenOn=false</span></span></li><li><span class="name"><span class="innerContentContainer">亮度值：mScreenBrightness=255</span></span></li><li><span class="name"><span class="innerContentContainer">屏幕休眠时间：Screen off timeout: 60000 ms</span></span></li><li><span class="name"><span class="innerContentContainer">屏幕分辨率：mDisplayWidth=1440，mDisplayHeight=2560</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">关闭充电功能： adb shell dumpsys battery unplug</span></span></li><li><span class="name"><span class="innerContentContainer">设置电量： adb shell dumpsys battery set level 19</span></span></li><li><span class="name"><span class="innerContentContainer">恢复充电功能： adb shell dumpsys battery reset</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">安全管理</span></span><ul><li><span class="name"><span class="innerContentContainer">获取账号状态: adb shell dumpsys account</span></span></li><li><span class="name"><span class="innerContentContainer">查看SELinux状态： adb shell getenforce</span></span></li><li><span class="name"><span class="innerContentContainer">设置SELinux状态： adb shell setenforce 0/1 （0表示管关闭，1表示打开）</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">内存管理</span></span><ul><li><span class="name"><span class="innerContentContainer">查看设备cpu和内存占用情况：adb shell top</span></span></li><li><span class="name"><span class="innerContentContainer">查看占用内存前6的app：adb shell top -m 6</span></span></li><li><span class="name"><span class="innerContentContainer">刷新一次内存信息，然后返回：adb shell top -n 1</span></span></li><li><span class="name"><span class="innerContentContainer">查询各进程内存使用情况：adb shell procrank</span></span></li><li><span class="name"><span class="innerContentContainer">查看当前内存占用：adb shell cat /proc/meminfo</span></span></li><li><span class="name"><span class="innerContentContainer">查看IO内存分区：adb shell cat /proc/iomem</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">分区和文件管理</span></span><ul><li><span class="name"><span class="innerContentContainer">将system分区重新挂载为可读写分区：adb remount</span></span></li><li><span class="name"><span class="innerContentContainer">从本地复制文件到设备：adb push &lt;local&gt; &lt;remote&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">从设备复制文件到本地：adb pull &lt;remote&gt;&nbsp; &lt;local&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">查看文件内容：adb shell cat &lt;file&gt;</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">进程管理</span></span><ul><li><span class="name"><span class="innerContentContainer">查看进程列表：adb shell ps</span></span></li><li><span class="name"><span class="innerContentContainer">获取指定进程号： adb shell "ps | grep camera"</span></span></li><li><span class="name"><span class="innerContentContainer">查看指定进程状态：adb shell ps -x [PID]</span></span></li><li><span class="name"><span class="innerContentContainer">杀死一个进程：adb shell kill [pid]</span></span></li><li><span class="name"><span class="innerContentContainer">获取线程数的上限: adb shell cat /proc/sys/kernel/threads_max</span></span><ul><li><span class="name"><span class="innerContentContainer">FindX 是 57798</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取同时打开文件数上限: adb shell cat /proc/sys/fs/file_max</span></span><ul><li><span class="name"><span class="innerContentContainer">FindX 是732094</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">关闭 java 虚拟机: adb shell stop</span></span></li><li><span class="name"><span class="innerContentContainer">打开 java 虚拟机: adb shell start</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">APK管理</span></span><ul><li><span class="name"><span class="innerContentContainer">安装APK：adb install &lt;apkfile&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">Q版本上安装APK：adb install -t &lt;apkfile&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">重新安装apk(保留数据和缓存)：adb install -r &lt;apkfile&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">安装apk到sd卡：adb install -s &lt;apkfile&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">卸载APK：adb uninstall &lt;package&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">卸载app但保留数据和缓存文件：adb uninstall -k &lt;package&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">获取apk的packagename 和 classname:  aapt d badging &lt;apkfile&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">列出安装在设备上的应用:  adb shell pm list package</span></span></li><li><span class="name"><span class="innerContentContainer">列出系统应用: adb shell pm list package -s</span></span></li><li><span class="name"><span class="innerContentContainer">列出第三方应用:  adb shell pm list package -3</span></span></li><li><span class="name"><span class="innerContentContainer">列出应用包名及对应的apk名及存放位置: adb shell pm list package -f</span></span></li><li><span class="name"><span class="innerContentContainer">列出应用包名及其安装来源:   adb shell pm list package -f -3 -i zhihu</span></span><ul><li><span class="name"><span class="innerContentContainer">返回: package:/data/app/com.zhihu.android-1.apk=com.zhihu.android  installer=com.xiaomi.market</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">列出对应包名的 .apk 位置: adb shell pm path com.tencent.mobileqq</span></span></li><li><span class="name"><span class="innerContentContainer">列出指定应用的 dump 信息: adb shell pm dump com.tencent.mobileqq</span></span></li><li><span class="name"><span class="innerContentContainer">安装应用(apk 文件在Android 设备中): pm install</span></span></li><li><span class="name"><span class="innerContentContainer">清除应用数据:  pm clear</span></span></li><li><span class="name"><span class="innerContentContainer">设置和获取应用安装位置: pm get-install-location</span></span><ul><li><span class="name"><span class="innerContentContainer">[0/auto]：默认为自动</span></span></li><li><span class="name"><span class="innerContentContainer">[1/internal]：默认为安装在手机内部</span></span></li><li><span class="name"><span class="innerContentContainer">[2/external]：默认安装在外部存储</span></span></li></ul></li></ul></li><li><span class="name"><span class="innerContentContainer">Activity和service管理</span></span><ul><li><span class="name"><span class="innerContentContainer">启动应用：adb shell am start -n &lt;package_name&gt;/.&lt;activity_class_name&gt;</span></span></li><li><span class="name"><span class="innerContentContainer">启动一个 Activity: adb shell am start -n com.android.camera/.Camera</span></span></li><li><span class="name"><span class="innerContentContainer">先停止再启动:  adb shell am start -S com.android.camera/.Camera</span></span></li><li><span class="name"><span class="innerContentContainer">等待应用完成启动: adb shell am start -W com.android.camera/.Camera</span></span></li><li><span class="name"><span class="innerContentContainer">结束应用: am force-stop com.android.camera/.Camera</span></span></li><li><span class="name"><span class="innerContentContainer">获取当前界面的控件信息: adb shell uiautomator dump. 返回: </span></span><ul><li><span class="name"><span class="innerContentContainer">UI hierchary dumped to: /storage/emulated/legacy/window_dump.xml</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">列举所有services：adb shell service list</span></span></li><li><span class="name"><span class="innerContentContainer">启动一个服务: am startservice</span></span></li><li><span class="name"><span class="innerContentContainer">发送一个广播: am broadcast</span></span></li><li><span class="name"><span class="innerContentContainer">监控 crash 与 ANR:  am monitor </span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">settings 命令</span></span><ul><li><span class="name"><span class="innerContentContainer">setings 命令的key值在 android.provider.Settings 中定义。</span></span></li><li><span class="name"><span class="innerContentContainer">获取、修改wifi状态（wifi_on）、飞行模式（airlpane_mode_on）等，这里也是appium中 getNetworkConnection获得设备网络状态的方法。</span></span></li><li><span class="name"><span class="innerContentContainer">获取通过网络获取时间的状态: adb shell settings get global auto_time. 返回:</span></span><ul><li><span class="name"><span class="innerContentContainer">1为允许、0为不允许</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">更改通过网络获取时间的状态，从1改为0: adb shell settings put global auto_time 0</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">输入法和本地化</span></span><ul><li><span class="name"><span class="innerContentContainer">列出输入法: adb shell ime list -s, 返回:</span></span><ul><li><span class="name"><span class="innerContentContainer">com.google.android.inputmethod.pinyin/.PinyinIME</span></span></li><li><span class="name"><span class="innerContentContainer">com.baidu.input_mi/.ImeService</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">获取系统默认输入法: adb shell settings get secure default_input_method, 返回:</span></span><ul><li><span class="name"><span class="innerContentContainer">com.sohu.inputmethod.sogouoem/.SogouIME  默认搜狗输入法</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">选择输入法:  adb shell ime set com.baidu.input_mi/.ImeService</span></span></li><li><span class="name"><span class="innerContentContainer">默认为Appium使用中文输入时安装的输入法</span></span><ul><li><span class="name"><span class="innerContentContainer">adb shell settings get secure default_input_method io.appium.android.ime/.UnicodeIME</span></span></li></ul></li><li><span class="name"><span class="innerContentContainer">put命令更改默认输入法（将io.appium.android.ime/.UnicodeIME改为com.sohu.inputmethod.sogouoem/.SogouIME）</span></span><ul><li><span class="name"><span class="innerContentContainer">adb shell settings put secure default_input_method com.sohu.inputmethod.sogouoem/.SogouIME</span></span></li></ul></li></ul></li></ul>
  </body>
</html>