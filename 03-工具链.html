<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body {font-family:'Helvetica Neue', Arial, sans-serif; color:#333; font-size:13px; line-height:17px;}
      body .name,body .note {white-space:pre-wrap;}
      body ul {list-style:disc; margin:0; padding:0;}
      body li {margin:4px 0 4px 20px; padding:0;}
      body>.name {font-size:16px; line-height:21px;}
      body>.note {font-size:13px; line-height:17px;}
      body>ul {margin-top:15px;}
      body .name.done {text-decoration:line-through; color:#999;}
      body .note {font-size:12px; color:#666;}
    </style>
  </head>
  <body>
    <span class="name">03-工具链</span><ul><li><span class="name">Windows上安装cygwin</span><ul><li><span class="name">下载&nbsp;Cygwin&nbsp;,然后就是一路的下一步。第一次安装,要选install from internet。</span></li><li><span class="name">使用镜像：</span><ul><li><span class="name"><a class="contentLink" target="_blank" rel="noreferrer" href="http://mirrors.aliyun.com/">http://mirrors.aliyun.com/</a></span></li><li><span class="name"><a class="contentLink" target="_blank" rel="noreferrer" href="http://www.cygwin.cn">http://www.cygwin.cn</a></span></li></ul></li><li><span class="name">选择需要下载安装的组件包。需要选择分类视图。然后选择下面几个库:</span><ul><li><span class="name">Net -&gt; curl</span></li><li><span class="name">Devel -&gt; git, git-completion, git-gui, gitk</span></li><li><span class="name">Libs -&gt; libreadline7, libiconv2</span></li><li><span class="name">Editors -&gt; vim</span></li><li><span class="name">Python -&gt; python</span></li><li><span class="name">如果要gcc编译，则安装 binutils，gcc，gcc-mingw，gdb</span></li></ul></li></ul></li><li><span class="name">Mac上的特殊设置</span><ul><li><span class="name">分区一定要是大小写敏感的文件系统. 通过磁盘工具检查. 如果不是, 则要创建.</span><ul><li><span class="name">hdiutil create -type SPARSE -fs 'Case-sensitive Journaled HFS+' -size 60g ~/android.dmg    // android.dmg 为自定义文件名.</span></li><li><span class="name">加载分区: hdiutil attach ~/android.dmg.sparseimage -mountpoint /Volumes/android</span></li><li><span class="name">调整分区大小: hdiutil resize -size &lt;new-size-you-want&gt;g ~/android.dmg.sparseimage</span></li></ul></li><li><span class="name">修改文件打开数量上限</span><ul><li><span class="name">mac默认是1024, Android编译时可能超过. 需要修改:</span><ul><li><span class="name">~/.bash_profile 中添加内容：</span></li><li><span class="name">ulimit -S -n 1024</span></li></ul></li></ul></li><li><span class="name">安装 Gradle</span><ul><li><span class="name">brew install gradle (前提: 要先安装xCode)</span></li><li><span class="name">安装位置: /usr/local/Cellar/gradle/2.2.1</span></li><li><span class="name">check安装是否成功: gradle -version</span></li><li><span class="name">写入环境变量:</span><ul><li><span class="name">vim ~/.bash_profile</span></li><li><span class="name">GRADLE_HOME=/usr/local/Cellar/gradle/2.2.1</span></li><li><span class="name">export GRADLE_HOME</span></li><li><span class="name">export PATH=$PATH:$GRADLE_HOME/bin</span></li></ul></li></ul></li></ul></li><li><span class="name">Android代码下载</span><ul><li><span class="name">国内可用的镜像：<a class="contentLink" target="_blank" rel="noreferrer" href="https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/">https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/</a></span></li><li><span class="name">下载Repo： 启动Cygwin,然后cd /bin,切到bin目录执行</span><ul><li><span class="name">curl <a class="contentLink" target="_blank" rel="noreferrer" href="https://storage.googleapis.com/git-repo-downloads/repo">https://storage.googleapis.com/git-repo-downloads/repo</a> &gt; ~/bin/repo</span></li><li><span class="name">下载repo到bin目录.</span></li><li><span class="name">然后执行： chmod a+x repo赋予它可执行的权限.</span></li><li><span class="name">对repo文件做如下修改:</span><ul><li><span class="name">REPO_URL = '<a class="contentLink" target="_blank" rel="noreferrer" href="https://gerrit.googlesource.com/git-repo'">https://gerrit.googlesource.com/git-repo'</a>  替换为</span></li><li><span class="name">REPO_URL = '<a class="contentLink" target="_blank" rel="noreferrer" href="https://gerrit-google.tuna.tsinghua.edu.cn/git-repo'">https://gerrit-google.tuna.tsinghua.edu.cn/git-repo'</a></span></li></ul></li></ul></li><li><span class="name">repo init -u <a class="contentLink" target="_blank" rel="noreferrer" href="https://aosp.tuna.tsinghua.edu.cn/platform/manifest">https://aosp.tuna.tsinghua.edu.cn/platform/manifest</a></span></li><li><span class="name">repo init -u <a class="contentLink" target="_blank" rel="noreferrer" href="https://aosp.tuna.tsinghua.edu.cn/platform/manifest">https://aosp.tuna.tsinghua.edu.cn/platform/manifest</a> -b android-10.0.0_r14 --repo-url=<a class="contentLink" target="_blank" rel="noreferrer" href="https://mirrors.tuna.tsinghua.edu.cn/git/git-repo/">https://mirrors.tuna.tsinghua.edu.cn/git/git-repo/</a></span></li><li><span class="name">repo sync</span></li></ul></li></ul>
  </body>
</html>