<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body {font-family:'Helvetica Neue', Arial, sans-serif; color:#333; font-size:13px; line-height:17px;}
      body .name,body .note {white-space:pre-wrap;}
      body ul {list-style:disc; margin:0; padding:0;}
      body li {margin:4px 0 4px 20px; padding:0;}
      body>.name {font-size:16px; line-height:21px;}
      body>.note {font-size:13px; line-height:17px;}
      body>ul {margin-top:15px;}
      body .name.done {text-decoration:line-through; color:#999;}
      body .note {font-size:12px; color:#666;}
    </style>
  </head>
  <body>
    <span class="name">33-Git</span><ul><li><span class="name">Git库: 就是根目录下的.git 目录，其中存放的是我们所提交的文档索引内容，Git 可基于文档索引内容对其所管理的文档进行内容追踪，从而实现文档的版本控制.</span></li><li><span class="name">Git库中由三部分组成</span><ul><li><span class="name">工作目录：用户本地的目录</span></li><li><span class="name">Index（索引）：将工作目录下所有文件（包含子目录）生成快照，存放到一个临时的存储区域.</span></li><li><span class="name">仓库：将索引通过commit命令提交至仓库中，每一次提交都意味着版本在进行一次更新。</span></li></ul></li><li><span class="name">每次提交都会产生一个新的changeid, 并可在该changeid上打标签, 拉分支.</span></li><li><span class="name">配置</span><ul><li><span class="name">获取帮助: git help</span></li><li><span class="name">配置用户名: git config --global <a class="contentLink" target="_blank" rel="noreferrer" href="http://user.name">user.name</a> "userName"&nbsp;&nbsp;</span></li><li><span class="name">配置email: git config --global user.email&nbsp;you@yourdomain</span></li></ul></li><li><span class="name">分支管理策略  </span><ul><li><span class="name">当第一次执行git init时，系统会自动创建一个名为“master”的分支。</span></li><li><span class="name">建议创建一个属于自己的个人工作分支，以避免对主分支 master 造成太多的干扰，也方便与他人交流协作;</span></li><li><span class="name">当进行高风险的工作时，创建一个试验性的分支;</span></li><li><span class="name">查看本地分支: git branch, 在列出的分支中，若分支名前有*，即表示为当前分支。</span></li><li><span class="name">查看服务器分支: git branch -r</span></li><li><span class="name">查看当前在哪个分支上: cat .git/HEAD</span></li><li><span class="name">创建分支: git branch&nbsp;分支名, 可以用任意字符串.</span></li><li><span class="name">创建分支, 且切换到该分支: git checout -b&nbsp;分支名</span></li><li><span class="name">切换到指定分支: git checkout 分支名</span></li><li><span class="name">删除分支: git branch -D 分支名</span></li><li><span class="name">切换到指定commit id: git checkout tag名</span></li><li><span class="name">比较两个分支上的文件的区别: git diff master 分支名（比较主分支和另一个分支的区别）</span></li><li><span class="name">查看当前分支的操作记录: git whatchanged</span></li></ul></li><li><span class="name">查看当前代码是从哪个分支上拉的. git branch -vv</span></li><li><span class="name">查看提交记录: git log</span><ul><li><span class="name">--oneline: 一行显示</span></li><li><span class="name">-数字: 显示多少条</span></li><li><span class="name">--pretty=raw: 显示更多提示信息</span></li><li><span class="name">-p: 显示最多信息, 包括代码变更</span></li><li><span class="name">--graph: 显示提交线索, 主要用于父子提交</span></li><li><span class="name">--author ***: 指定提交人</span></li><li><span class="name">--grep ***: 指定关键字</span></li><li><span class="name">--date_order: 按照提交时间顺序. 不准, 推荐使用 greeit 网站.</span></li></ul></li><li><span class="name">本地操作</span><ul><li><span class="name">初始化本地库: git init</span></li><li><span class="name">查看状态: git status</span><ul><li><span class="name">git add 前后建议各 git status 一次, 确认没有状态错误.</span></li></ul></li><li><span class="name">添加文件: git add</span><ul><li><span class="name">git add . : 添加当前目录下的所有文件和子目录&nbsp;&nbsp;</span></li><li><span class="name">git add dirname: 添加一个目录</span></li><li><span class="name">git add *.java: 添加当前目录下的所有java文件</span></li><li><span class="name">git add -A: 当增, 改, 删同时存在时, 用这个命令.</span></li></ul></li><li><span class="name">提交修改内容: git commit</span><ul><li><span class="name">直接调用git commit命令，会提示填写注释。无注释会提交失败.</span></li><li><span class="name">带注释提交是这样的: git commit -m "Initial commit of gittutor reposistory"&nbsp;</span></li><li><span class="name">每一次提交，git就会为全局代码建立一个唯一的commit标识代码.</span></li></ul></li><li><span class="name">追加提交: git commit --amend</span></li><li><span class="name">回退所有本地修改: git reset --hard changeid/tagid</span><ul><li><span class="name">git reset HEAD^ 回退第一个记录</span></li><li><span class="name">git reset HEAD~2 回退第二个记录&nbsp;&nbsp;</span></li></ul></li><li><span class="name">删除文件: git rm</span><ul><li><span class="name">git rm abc.java  : 删除当前目录的指定文件</span></li><li><span class="name">git rm -r *: 删除当前目录下的所有文件和子目录</span></li><li><span class="name">git rm --ached  adb.java:  删除指定文件，但只删除index中的文件记录；将已经git add的文件remove到cache中,这样commit的时候不会提交这个文件, 适用于一下子添加了很多文件, 却又想排除其中个别几个文件的情况.&nbsp;&nbsp;</span></li></ul></li><li><span class="name">查看历史日志: git log</span><ul><li><span class="name">查看指定文件的修改日志: git log -p ./abc.java</span></li><li><span class="name">查看详细的统计数据: git log --stat -summary&nbsp;</span></li></ul></li><li><span class="name">查看指定版本的修改记录: git show + changeid</span><ul><li><span class="name">查看指定标签的修改记录: git show tagName</span></li></ul></li><li><span class="name">打标签: git tag "...",  可以用任意字符串.</span></li></ul></li><li><span class="name">文件忽略机制</span><ul><li><span class="name">工作目录中有一些文件是不希望接受Git 管理的，譬如程序编译时生成的中间文件等等。Git 提供了文档忽略机制，可以将不希望接受Git 管理的文件信息写到同一目录下的.gitignore 文件中。</span></li><li><span class="name">支持 *.lib 通配符, build/  文件路径 这两种形式.</span></li></ul></li><li><span class="name">把服务器上下载下来的代码和本地代码合并, 或本地分支合并: git merge dev</span></li><li><span class="name">查看当前的git库中有哪些文件: git-ls-files</span></li><li><span class="name">几个特殊的tagid</span><ul><li><span class="name">dev表示发生在dev分支上的最后一次提交。</span></li><li><span class="name">dev^表示发生在dev分支上的倒数第二次提交。</span></li><li><span class="name">dev~2表示发生在dev分支上的倒数第三次提交。</span></li></ul></li><li><span class="name">本地代码更新到服务器端代码库上: git push origin&nbsp;, origin&nbsp;是服务器端代码库名.</span></li><li><span class="name">删除指定提交</span><ul><li><span class="name">找到它之前的提交, 执行命令: git rebase -i ID</span></li><li><span class="name">在弹出界面上, 将要删除的提交的id 前面的 pick 改为 drop, 然后保存退出.</span></li></ul></li><li><span class="name">diff文件的生成和使用</span><ul><li><span class="name">git status   // diff前先查看下是个好习惯</span></li><li><span class="name">git diff --full-index *** &gt; diff.txt,   其中 *** 包括如下几种:</span><ul><li><span class="name">什么也不填, 即表示所有.</span></li><li><span class="name">*.java,  所有的java 文件</span></li><li><span class="name">a.java,  指定文件名</span></li></ul></li><li><span class="name">使用diff:  git patch -p0 &lt; diff.txt</span></li><li><span class="name">两个文件之间产生diff: git diff file1 file2 &gt; diff.txt</span></li></ul></li></ul>
  </body>
</html>